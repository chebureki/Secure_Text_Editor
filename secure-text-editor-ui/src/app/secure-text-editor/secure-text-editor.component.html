<h1>The Secure Text Editor</h1>

<main class="editor-layout">
  <!-- Editor Section -->
  <section class="editor">
    <!-- File Upload Section -->
    <div class="upload-button">
      <input type="file" name="upload-plaintext" (change)="onFileSelected($event)" accept=".txt" class="file-input" #uploader hidden>
      <button mat-fab extended matTooltip="Upload a text file" class="upload-file" (click)="uploader.click()">
        <mat-icon>upload_file</mat-icon>
        Upload a text file!
      </button>
      <button mat-fab extended matTooltip="You can upload a text file here!" class="upload-decrypt-file" style="background-color: #006666">
        <mat-icon>lock_open</mat-icon>
        Upload a file to decrypt!
      </button>
    </div>

    <!-- Textarea to Display File Content -->
    <mat-form-field class="text-editor">
      <mat-label>Enter your text!</mat-label>
      <textarea matInput placeholder="I am so safe!"
                cdkTextareaAutosize cdkAutosizeMinRows="30"
                [(ngModel)]="fileContent" [ngModelOptions]="{standalone: true}">
      </textarea>
    </mat-form-field>
  </section>

  <!-- Encryption Options Section -->
  <section class="encryption-options">
    <h2>Encryption Options</h2>
    <div class="save-encrypt">
      <button mat-fab extended (click)="encryptFileContent()" class="save-btn">
        <mat-icon>save</mat-icon>
        Save the file!
      </button>
      <button mat-fab extended (click)="encryptFileContent()" class="encrypt-btn" style="background-color: #006666">
        <mat-icon>lock</mat-icon>
        Save and encrypt the text file!
      </button>
    </div>


    <!-- Encryption Options Form -->
    <form>
      <mat-radio-group aria-label="encryption" [(ngModel)]="selectedEncryptionType" [ngModelOptions]="{standalone: true}">
        <h3>Symmetric Encryption</h3>
        <mat-radio-button value="AES_SYM">AES</mat-radio-button>

        <!-- Show Key Length dropdown if AES (Symmetric) is selected -->
        <div *ngIf="selectedEncryptionType === 'AES_SYM'" class="symmetric-encryption">
          <mat-form-field>
            <mat-label>Key Length</mat-label>
            <mat-select [(ngModel)]="selectedKeyLength" name="keyLength">
              <mat-option value="128_SYM">128 Bit</mat-option>
              <mat-option value="192_SYM">192 Bit</mat-option>
              <mat-option value="256_SYM">256 Bit</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <h3>Password-based Encryption</h3>
        <div class="password-based-encryption">
          <mat-radio-button value="AES_PAS">AES</mat-radio-button>
          <!-- Show Key Length dropdown if AES (Password-based) is selected -->
          <div *ngIf="selectedEncryptionType === 'AES_PAS'" class="password-based-encryption" id="AES-PAS">
            <mat-form-field>
              <mat-label>Key Length</mat-label>
              <mat-select [(ngModel)]="selectedPasswordAlgorithm" name="passwordAlgorithm">
                <mat-option value="256_PAS">256 Bit</mat-option>
                <mat-option value="GCM_PAS">GCM</mat-option>
                <mat-option value="SCRYPT_AES">SCRYPT</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <mat-radio-button value="ChaCha20_PAS">ChaCha20</mat-radio-button>
          <!-- Show Key Length dropdown if ChaCha20 is selected -->
          <div *ngIf="selectedEncryptionType === 'ChaCha20_PAS'" class="password-based-encryption" id="ChaCha-PAS">
            <mat-form-field>
              <mat-label>Key Length</mat-label>
              <mat-select [(ngModel)]="selectedChaCha20Algorithm" name="chacha20Algorithm">
                <mat-option value="256_CHA">256 Bit</mat-option>
                <mat-option value="SCRYPT_CHA">SCRYPT</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <mat-radio-button value="PBE_PAS">PBEWithSHA256And128BitAES-CBC-BC</mat-radio-button>
        </div>
        <h3>Digital Signature</h3>
        <mat-radio-button value="SHA_DSA">SHA256withDSA</mat-radio-button>
      </mat-radio-group>
    </form>
  </section>
</main>
